# Wwise DSL é€†å‘å·¥ç¨‹ä¸è®­ç»ƒæ•°æ®ç”Ÿæˆ SKILL

## æ¦‚è¿°

æœ¬æŠ€èƒ½æ–‡æ¡£æè¿°äº†ä¸€å¥—å®Œæ•´çš„ Wwise éŸ³é¢‘å·¥ç¨‹é€†å‘å·¥å…·é“¾,ç”¨äº:
1. å°† Wwise `.wwu` æ–‡ä»¶é€†å‘è½¬æ¢ä¸º DSL ä»£ç 
2. ç”Ÿæˆä¸“ä¸šçš„è‡ªç„¶è¯­è¨€è®­ç»ƒæŒ‡ä»¤
3. æ‰©å……æ ·æœ¬é‡ä»¥æ»¡è¶³å¾®è°ƒéœ€æ±‚
4. éªŒè¯ DSL æ ·æœ¬è´¨é‡

æ•´ä¸ªå·¥å…·é“¾è®¾è®¡ç›®æ ‡æ˜¯ä¸º AI å¾®è°ƒç”Ÿæˆé«˜è´¨é‡çš„ Wwise DSL è®­ç»ƒæ•°æ®ã€‚

---

## å·¥å…·é“¾æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Wwise å·¥ç¨‹æ–‡ä»¶ (.wwu)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   reverse_compiler.py (V3.2)                            â”‚
â”‚                      é€†å‘ç¼–è¯‘å™¨ - WWU â†’ DSL                              â”‚
â”‚  â€¢ æ”¯æŒå¤šæ–‡ä»¶/å¤šç›®å½•æ‰¹é‡å¤„ç†                                              â”‚
â”‚  â€¢ è¾“å‡º: wwise_reverse_dataset.jsonl                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     åå¤„ç†ä¿®å¤è„šæœ¬                                        â”‚
â”‚                  ä¿®å¤å­æ ·æœ¬çš„ UNDER å¼•ç”¨                                  â”‚
â”‚  â€¢ å°†å¼•ç”¨å…¶ä»–æ ·æœ¬çš„ UNDER æ”¹ä¸º "Default Work Unit"                        â”‚
â”‚  â€¢ ç¡®ä¿æ¯ä¸ªæ ·æœ¬å¯ç‹¬ç«‹éªŒè¯                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  instruction_generator.py (V1.0)                        â”‚
â”‚                    æŒ‡ä»¤ç”Ÿæˆå™¨ - æ·»åŠ è‡ªç„¶è¯­è¨€æè¿°                           â”‚
â”‚  â€¢ ä¸“ä¸šæ¸¸æˆéŸ³é¢‘è®¾è®¡å¸ˆå£å»                                                 â”‚
â”‚  â€¢ éšæœºåŒ–è¡¨è¾¾é¿å…é‡å¤                                                     â”‚
â”‚  â€¢ è¾“å‡º: wwise_training_data_final.jsonl                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      dsl_fission.py (V1.0)                              â”‚
â”‚                       æ ·æœ¬è£‚å˜å™¨ - æ‰©å……æ•°æ®é‡                             â”‚
â”‚  â€¢ åŸºäºçœŸå®å‚æ•°è£‚å˜                                                       â”‚
â”‚  â€¢ æ”¯æŒ simple/medium/advanced çº§åˆ«                                      â”‚
â”‚  â€¢ è¾“å‡º: wwise_training_expanded.jsonl                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AI å¾®è°ƒè®­ç»ƒ                                       â”‚
â”‚                   Fine-tuning Dataset Ready                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒç‰ˆæœ¬ä¿¡æ¯

| ç»„ä»¶ | ç‰ˆæœ¬ | æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|------|
| Reverse Compiler | V3.2 | reverse_compiler.py | WWU â†’ DSL é€†å‘ç¼–è¯‘ |
| DSL Parser | V7.2 | dsl_parser.py | DSL â†’ WAAPI æ‰§è¡Œè®¡åˆ’ |
| Registry | V8.2 | registry.py | å¯¹è±¡ GUID æ³¨å†Œä¸æŸ¥æ‰¾ |
| Instruction Generator | V1.0 | instruction_generator.py | è‡ªç„¶è¯­è¨€æŒ‡ä»¤ç”Ÿæˆ |
| DSL Fission | V1.0 | dsl_fission.py | æ ·æœ¬è£‚å˜æ‰©å…… |

---

## å·¥å…·è¯¦è§£

### 1. reverse_compiler.py - é€†å‘ç¼–è¯‘å™¨ V3.2

**åŠŸèƒ½**: å°† Wwise `.wwu` XML æ–‡ä»¶è½¬æ¢ä¸º DSL ä»£ç 

**æ ¸å¿ƒç‰¹æ€§**:
- å®Œå…¨é€‚é… DSL Parser V7.0+ è¯­æ³•
- æ”¯æŒå¤šæ–‡ä»¶/å¤šç›®å½•æ‰¹é‡å¤„ç†
- è¿½åŠ æ¨¡å¼æ”¯æŒ
- äº¤äº’æ¨¡å¼æ”¯æŒæ‹–æ‹½
- å·²ç§»é™¤ Sound ä½œä¸ºé€»è¾‘æ ¹(é¿å…å­¤å„¿æ ·æœ¬)

**æ”¯æŒçš„ DSL å‘½ä»¤**:

| å‘½ä»¤ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| CREATE | åˆ›å»ºå¯¹è±¡ | `CREATE Sound "Hit_01" UNDER "Impacts"` |
| SET_PROP | è®¾ç½®å±æ€§ | `SET_PROP "Hit_01" "Volume" = -3` |
| LINK | å»ºç«‹å¼•ç”¨ | `LINK "Hit_01" TO "Master" AS "Bus"` |
| ASSIGN | Switch èµ‹å€¼ | `ASSIGN "Container" STATE "Default" TO "Child"` |
| ADD_ACTION | Event åŠ¨ä½œ | `ADD_ACTION "Event" "Play" TARGET "Sound"` |

**é€»è¾‘æ ¹ç±»å‹** (æ¯ä¸ªç”Ÿæˆç‹¬ç«‹æ ·æœ¬):
- RandomSequenceContainer
- SwitchContainer
- BlendContainer
- ActorMixer
- Event
- Bus / AuxBus
- SwitchGroup / StateGroup
- GameParameter
- Attenuation

**ä½¿ç”¨æ–¹æ³•**:

```bash
# å•ä¸ªæ–‡ä»¶
python reverse_compiler.py Actor-Mixer.wwu

# å¤šä¸ªæ–‡ä»¶åˆå¹¶è¾“å‡º
python reverse_compiler.py SFX.wwu Music.wwu VO.wwu -o combined.jsonl

# æ•´ä¸ªç›®å½•(é€’å½’æ‰«æ)
python reverse_compiler.py "C:/Wwise Project/Actor-Mixer Hierarchy"

# å¤šä¸ªç›®å½•
python reverse_compiler.py ./SFX ./Music ./VO -o all_data.jsonl

# è¿½åŠ æ¨¡å¼(å¤šæ¬¡è¿è¡Œç´¯ç§¯)
python reverse_compiler.py ./NewSFX -o dataset.jsonl --append

# äº¤äº’æ¨¡å¼(æ‹–æ‹½æ–‡ä»¶)
python reverse_compiler.py --interactive
```

**è¾“å‡ºæ ¼å¼** (JSONL):
```json
{
  "instruction": "",
  "input": "",
  "output": "CREATE ActorMixer \"Boss\" UNDER \"Enemies\"\nLINK \"Boss\" TO \"Master\" AS \"Bus\"",
  "meta": {
    "source": "Enemies.wwu",
    "root_type": "ActorMixer",
    "root_name": "Boss",
    "line_count": 45,
    "depth": 3,
    "complexity": "expert",
    "commands": {"CREATE": 12, "SET_PROP": 8, "LINK": 25, "ASSIGN": 0, "ADD_ACTION": 0}
  }
}
```

---

### 2. åå¤„ç†ä¿®å¤è„šæœ¬

**åŠŸèƒ½**: ä¿®å¤å­æ ·æœ¬çš„ UNDER å¼•ç”¨,ç¡®ä¿æ¯ä¸ªæ ·æœ¬å¯ç‹¬ç«‹éªŒè¯

**é—®é¢˜èƒŒæ™¯**:
é€†å‘ç¼–è¯‘å™¨ä¼šä¸ºåµŒå¥—çš„é€»è¾‘æ ¹ç”Ÿæˆç‹¬ç«‹æ ·æœ¬,å¯¼è‡´å­æ ·æœ¬çš„ UNDER æŒ‡å‘å…¶ä»–æ ·æœ¬çš„æ ¹å¯¹è±¡ã€‚åœ¨ç‹¬ç«‹éªŒè¯æ—¶,çˆ¶å¯¹è±¡ä¸å­˜åœ¨ä¼šå¯¼è‡´å¤±è´¥ã€‚

**ä¿®å¤é€»è¾‘**:
```python
# å°†å¼•ç”¨å…¶ä»–æ ·æœ¬æ ¹å¯¹è±¡çš„ UNDER æ”¹ä¸º "Default Work Unit"
if parent_name in all_sample_root_names:
    line = line.replace(f'UNDER "{parent_name}"', 'UNDER "Default Work Unit"')
```

**ä½¿ç”¨æ–¹æ³•**:
```python
import json

samples = []
with open('input.jsonl', 'r') as f:
    for line in f:
        samples.append(json.loads(line))

root_names = {s['meta']['root_name'] for s in samples}

for s in samples:
    dsl_lines = s['output'].split('\n')
    first_line = dsl_lines[0]
    
    if 'UNDER "' in first_line:
        parent_start = first_line.find('UNDER "') + 7
        parent_end = first_line.find('"', parent_start)
        parent_name = first_line[parent_start:parent_end]
        
        if parent_name in root_names:
            dsl_lines[0] = first_line[:parent_start] + "Default Work Unit" + first_line[parent_end:]
            s['output'] = '\n'.join(dsl_lines)

with open('output_fixed.jsonl', 'w') as f:
    for s in samples:
        f.write(json.dumps(s, ensure_ascii=False) + '\n')
```

---

### 3. instruction_generator.py - æŒ‡ä»¤ç”Ÿæˆå™¨ V1.0

**åŠŸèƒ½**: ä¸º DSL æ ·æœ¬ç”Ÿæˆä¸“ä¸šçš„è‡ªç„¶è¯­è¨€æŒ‡ä»¤

**æ ¸å¿ƒç‰¹æ€§**:
- æ¨¡æ‹Ÿèµ„æ·±æ¸¸æˆéŸ³é¢‘è®¾è®¡å¸ˆ/åˆ¶ä½œäººå£å»
- éšæœºåŒ–è¯æ±‡é¿å…é‡å¤
- è‡ªåŠ¨è¯†åˆ«ä¸šåŠ¡åœºæ™¯(æŠ€èƒ½/BOSS/è„šæ­¥å£°/åéª‘ç­‰)
- æ”¯æŒèŒä¸šè¯†åˆ«(å¼“ç®­æ‰‹/æ³•å¸ˆ/æˆ˜å£«ç­‰)

**è¯æ±‡éšæœºåŒ–**:

| ç±»åˆ« | éšæœºè¯åº“ |
|------|----------|
| è§’è‰²ç§°å‘¼ | ç©å®¶/ä¸»è§’/æœ¬åœ°ç©å®¶/Hostç©å®¶/ä¸»æ§è§’è‰²/æ“ä½œè§’è‰²... |
| åŠ¨ä½œåŠ¨è¯ | åˆ›å»º/æ­å»º/æ„å»º/åˆ¶ä½œ/è®¾è®¡/é…ç½®/å»ºç«‹... |
| ç»“æ„æè¿° | éŸ³æ•ˆå±‚çº§ç»“æ„/å£°éŸ³æ¶æ„/SFXå±‚çº§/Wwiseç»“æ„... |
| ç‰¹æ€§æè¿° | 3Dç©ºé—´å®šä½/è·ç¦»è¡°å‡/å¤šå˜ä½“éšæœº/è§’è‰²åŒºåˆ†... |

**åœºæ™¯è¯†åˆ«**:

| åœºæ™¯ | è¯†åˆ«å…³é”®è¯ | ç”Ÿæˆç¤ºä¾‹ |
|------|-----------|----------|
| ç©å®¶æŠ€èƒ½ | PlayerSkill, Skill_ | `å¸®æˆ‘æ­å»ºä¸»è§’é‡Šæ”¾ç«çƒæœ¯æ—¶çš„éŸ³æ•ˆå±‚çº§` |
| BOSS | Boss, BOSS, Elite | `æ„å»ºå‰¯æœ¬BOSSå¢¨è›‡çš„æŠ€èƒ½éŸ³æ•ˆç»“æ„` |
| å°æ€ª | Monster, Mob, Enemy | `ç»™é‡æ€ªå“¥å¸ƒæ—åˆ›å»ºæ”»å‡»éŸ³æ•ˆæ¶æ„` |
| è„šæ­¥å£° | Footstep, Walk, Run | `è®¾è®¡ä¸€å¥—æ”¯æŒå¤šæè´¨åˆ‡æ¢çš„è„šæ­¥å£°ç³»ç»Ÿ` |
| åéª‘ | Mount, Zuoqi, Ride | `åˆ›å»ºç©å®¶éª‘ä¹˜é£å‰‘æ—¶çš„éŸ³æ•ˆç»“æ„` |
| UI | UI, Menu, Button | `æ­å»ºä¸€å¥—ç•Œé¢æ“ä½œçš„åé¦ˆéŸ³æ•ˆ` |

**ä½¿ç”¨æ–¹æ³•**:

```bash
# æ­£å¼å¤„ç†
python instruction_generator.py input.jsonl output.jsonl

# é¢„è§ˆæ¨¡å¼(æŸ¥çœ‹å‰10æ¡æ•ˆæœ)
python instruction_generator.py input.jsonl --preview

# æŒ‡å®šç”Ÿæˆé£æ ¼
python instruction_generator.py input.jsonl output.jsonl --style professional
```

---

### 4. dsl_fission.py - æ ·æœ¬è£‚å˜å™¨ V1.0

**åŠŸèƒ½**: åŸºäºç°æœ‰æ ·æœ¬è¿›è¡Œåˆæ³•è£‚å˜,æ‰©å……è®­ç»ƒæ•°æ®é‡

**æ ¸å¿ƒåŸåˆ™**:

| åŸåˆ™ | è¯´æ˜ |
|------|------|
| å‚æ•°åˆæ³• | Bus/Attenuation/Conversion ç­‰å‚æ•°åªèƒ½ä»ç°æœ‰æ•°æ®ä¸­é€‰å– |
| å‘½åå¯å˜ | å¯¹è±¡åç§°å¯ä»¥å˜å¼‚(å‰ç¼€ã€åç¼€ã€æ•°å­—) |
| ç»“æ„å¯ç®€åŒ– | å¯ä»¥æå–å­æ ‘ã€ç§»é™¤å¯é€‰å±æ€§ |
| è¯­æ³•éªŒè¯ | æ¯ä¸ªè£‚å˜æ ·æœ¬éƒ½ä¼šéªŒè¯åŸºæœ¬è¯­æ³•æ­£ç¡®æ€§ |

**è£‚å˜çº§åˆ«**:

| çº§åˆ« | ç­–ç•¥ | é£é™©ç­‰çº§ | æ¨èåœºæ™¯ |
|------|------|----------|----------|
| simple | ä»…æ”¹åã€å¾®è°ƒæ•°å€¼ã€åŒç±»å‚æ•°æ›¿æ¢ | ğŸŸ¢ æœ€å®‰å…¨ | **é¦–é€‰** |
| medium | ç»“æ„ç®€åŒ–ã€å­é›†æå– | ğŸŸ¡ ä¸­ç­‰ | éœ€è¦æ›´å¤šæ ·æœ¬æ—¶ |
| advanced | è·¨æ ·æœ¬ç»„åˆã€å‚æ•°äº¤å‰ | ğŸŸ  éœ€éªŒè¯ | å¤§é‡æ‰©å…… |
| auto | è‡ªåŠ¨æ··åˆå„çº§åˆ« | ğŸŸ¡ ä¸­ç­‰ | å¹³è¡¡å¤šæ ·æ€§ |

**ä½¿ç”¨æ–¹æ³•**:

```bash
# ç®€å•è£‚å˜åˆ° 10000 æ ·æœ¬(æœ€å®‰å…¨)
python dsl_fission.py input.jsonl output.jsonl --target 10000 --level simple

# ä¸­çº§è£‚å˜åˆ° 15000 æ ·æœ¬
python dsl_fission.py input.jsonl output.jsonl --target 15000 --level medium

# è‡ªåŠ¨æ¨¡å¼è£‚å˜åˆ° 20000 æ ·æœ¬
python dsl_fission.py input.jsonl output.jsonl --target 20000 --level auto

# æŒ‡å®šéšæœºç§å­(å¯å¤ç°ç»“æœ)
python dsl_fission.py input.jsonl output.jsonl --target 10000 --level simple --seed 42
```

---

### 5. DSL Parser V7.2 & Registry V8.2

**V7.2 / V8.2 ä¿®å¤çš„æ ¸å¿ƒé—®é¢˜**: çˆ¶å­åŒå

**é—®é¢˜ç°è±¡**: `Sound can't be child of Sound`

**åŸå› åˆ†æ**:
```
WWU ç»“æ„:
RandomSequenceContainer "Boss_Jump"    â† çˆ¶å¯¹è±¡
  â””â”€ Sound "Boss_Jump"                 â† å­å¯¹è±¡åŒåï¼

æ‰§è¡Œ CREATE Sound "X" UNDER "Boss_Jump" æ—¶:
Registry è¿”å›äº† Sound çš„ GUID(æœ€ååˆ›å»ºçš„)è€Œé Container
```

**ä¿®å¤æ–¹æ¡ˆ**:

Registry V8.2:
```python
def get_guid(self, query, prefer_container=False):
    if prefer_container and len(paths) > 1:
        # ä¼˜å…ˆè¿”å›å®¹å™¨ç±»å‹
        for path in reversed(paths):
            if type_map[guid] in container_types:
                return guid
        return paths[0]  # è¿”å›ç¬¬ä¸€ä¸ª(çˆ¶å¯¹è±¡)
```

DSL Parser V7.2:
```python
# æŸ¥æ‰¾çˆ¶å¯¹è±¡æ—¶ä½¿ç”¨ prefer_container=True
parent_guid = self.registry.get_guid(parent, prefer_container=True)
```

---

## å®Œæ•´å·¥ä½œæµç¨‹

### æ­¥éª¤ 1: é€†å‘ç¼–è¯‘

```bash
python reverse_compiler.py \
    "D:/WwiseProject/Actor-Mixer Hierarchy" \
    "D:/WwiseProject/Events" \
    -o wwise_reverse_dataset.jsonl
```

### æ­¥éª¤ 2: åå¤„ç†ä¿®å¤ UNDER å¼•ç”¨

```python
# ä½¿ç”¨åå¤„ç†è„šæœ¬ä¿®å¤å­æ ·æœ¬çš„ UNDER å¼•ç”¨
python fix_under_references.py \
    wwise_reverse_dataset.jsonl \
    wwise_dataset_fixed.jsonl
```

### æ­¥éª¤ 3: ç”ŸæˆæŒ‡ä»¤

```bash
python instruction_generator.py \
    wwise_dataset_fixed.jsonl \
    wwise_training_data.jsonl
```

### æ­¥éª¤ 4: æ ·æœ¬è£‚å˜ (å¯é€‰)

```bash
python dsl_fission.py \
    wwise_training_data.jsonl \
    wwise_training_expanded.jsonl \
    --target 10000 \
    --level simple
```

### æ­¥éª¤ 5: éªŒè¯

ä½¿ç”¨ NeuroWwise App çš„æ‰¹é‡éªŒè¯åŠŸèƒ½,æŠ½æ ·éªŒè¯ 500-1000 æ¡,é¢„æœŸé€šè¿‡ç‡ > 95%ã€‚

---

## æ•°æ®æ ¼å¼è§„èŒƒ

### æœ€ç»ˆè®­ç»ƒæ•°æ®æ ¼å¼

```json
{
  "instruction": "å¸®æˆ‘æ­å»ºä¸€å¥—ä¸»ç©å®¶ä½¿ç”¨ç«çƒæœ¯æ—¶çš„éŸ³æ•ˆå±‚çº§,åŒ…å«3Dç©ºé—´å®šä½",
  "input": "",
  "output": "CREATE RandomSequenceContainer \"Fireball\" UNDER \"Default Work Unit\"\nSET_PROP \"Fireball\" \"RandomAvoidRepeating\" = True\nLINK \"Fireball\" TO \"skill_medium_2000\" AS \"Attenuation\"\nLINK \"Fireball\" TO \"player_skill\" AS \"Conversion\"\nLINK \"Fireball\" TO \"HostPlayerSkill\" AS \"Bus\"",
  "meta": {
    "source": "PlayerSkill_FX.wwu",
    "root_type": "RandomSequenceContainer",
    "root_name": "Fireball",
    "line_count": 5,
    "depth": 1,
    "complexity": "medium",
    "commands": {"CREATE": 1, "SET_PROP": 1, "LINK": 3, "ASSIGN": 0, "ADD_ACTION": 0}
  }
}
```

### å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| instruction | string | è‡ªç„¶è¯­è¨€æŒ‡ä»¤,æ¨¡æ‹Ÿç”¨æˆ·è¯·æ±‚ |
| input | string | é™„åŠ è¾“å…¥(é€šå¸¸ä¸ºç©º) |
| output | string | DSL ä»£ç ,å¤šè¡Œç”¨ `\n` åˆ†éš” |
| meta.source | string | æ¥æº WWU æ–‡ä»¶å |
| meta.root_type | string | æ ¹å¯¹è±¡ç±»å‹ |
| meta.root_name | string | æ ¹å¯¹è±¡åç§° |
| meta.line_count | int | DSL è¡Œæ•° |
| meta.depth | int | å±‚çº§æ·±åº¦ |
| meta.complexity | string | å¤æ‚åº¦: simple/medium/complex/expert |
| meta.commands | object | å„å‘½ä»¤ä½¿ç”¨æ¬¡æ•°ç»Ÿè®¡ |

---

## è®­ç»ƒå»ºè®®

### æ ·æœ¬é‡å‚è€ƒ

| è®­ç»ƒç›®æ ‡ | æ¨èæ ·æœ¬é‡ | è¯´æ˜ |
|----------|-----------|------|
| åŸºç¡€ç†è§£ | 1,000-3,000 | èƒ½ç†è§£ DSL è¯­æ³• |
| ä¸­ç­‰æ³›åŒ– | 3,000-5,000 | èƒ½å¤„ç†å¸¸è§åœºæ™¯ |
| é«˜è´¨é‡ç”Ÿæˆ | 5,000-10,000 | èƒ½ç”Ÿæˆä¸“ä¸šçº§ DSL |
| ä¸“å®¶çº§åˆ« | 10,000-20,000 | å¤æ‚åœºæ™¯ã€è¾¹ç¼˜æƒ…å†µ |

### æ ·æœ¬é•¿åº¦åˆ†å¸ƒå»ºè®®

| é•¿åº¦èŒƒå›´ | å æ¯” | è¯´æ˜ |
|----------|------|------|
| 1-30 è¡Œ | ~80% | ä¸»ä½“æ ·æœ¬ |
| 31-100 è¡Œ | ~15% | ä¸­ç­‰å¤æ‚åº¦ |
| 101-200 è¡Œ | ~3% | å¤æ‚ç»“æ„ |
| 200+ è¡Œ | ~2% | å¯è€ƒè™‘æˆªæ–­æˆ–è¿‡æ»¤ |

### æ•°æ®è´¨é‡æ£€æŸ¥æ¸…å•

- [ ] æ— å­¤å„¿æ ·æœ¬(æ‰€æœ‰ CREATE çš„çˆ¶å¯¹è±¡éƒ½å­˜åœ¨æˆ–ä¸ºå¤–éƒ¨å¼•ç”¨)
- [ ] DSL è¯­æ³•æ­£ç¡®(å¯é€šè¿‡ Parser éªŒè¯)
- [ ] instruction å¤šæ ·åŒ–(é¿å…å¤§é‡é‡å¤è¡¨è¾¾)
- [ ] å¤æ‚åº¦åˆ†å¸ƒåˆç†(ä¸è¦å…¨æ˜¯ç®€å•æ ·æœ¬)
- [ ] è¦†ç›–å¤šç§å¯¹è±¡ç±»å‹(Containerã€Soundã€Event ç­‰)
- [ ] å­æ ·æœ¬ UNDER å·²ä¿®å¤ä¸º "Default Work Unit"

---

## å¸¸è§é—®é¢˜æ’æŸ¥

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| `Sound can't be child of Sound` | çˆ¶å­åŒå,Registry è¿”å›é”™è¯¯ | ä½¿ç”¨ DSL Parser V7.2 + Registry V8.2 |
| `Can't connect child object to its parent` | å­æ ·æœ¬å¼•ç”¨äº†ä¸å­˜åœ¨çš„çˆ¶å¯¹è±¡ | åå¤„ç†ä¿®å¤ UNDER å¼•ç”¨ |
| éªŒè¯å¤±è´¥ç‡é«˜ | å­¤å„¿æ ·æœ¬ | ç¡®ä¿ä½¿ç”¨ V3.2 é€†å‘ç¼–è¯‘å™¨ |
| instruction é‡å¤ | è¯åº“ä¸å¤Ÿ | æ‰©å±• instruction_generator è¯åº“ |
| è£‚å˜è´¨é‡å·® | çº§åˆ«å¤ªé«˜ | ä½¿ç”¨ simple çº§åˆ« |
| æ ·æœ¬å¤ªé•¿ | å¤§å‹ç»“æ„ | è®­ç»ƒæ—¶æˆªæ–­æˆ–è¿‡æ»¤ >200 è¡Œæ ·æœ¬ |

---

## æ›´æ–°æ—¥å¿—

### 2024-12 æ›´æ–°

**Reverse Compiler V3.2**
- [Fix] ç§»é™¤ Sound ä½œä¸ºé€»è¾‘æ ¹,æ¶ˆé™¤å­¤å„¿æ ·æœ¬

**DSL Parser V7.2**
- [Critical Fix] ä¿®å¤çˆ¶å­åŒåé—®é¢˜ - ä¼˜å…ˆè¿”å›å®¹å™¨ç±»å‹ä½œä¸ºçˆ¶å¯¹è±¡

**Registry V8.2**
- [Fix] `get_guid` å¢åŠ  `prefer_container` å‚æ•°

**Instruction Generator V1.0**
- [New] é¦–ç‰ˆå‘å¸ƒ,ä¸“ä¸šæ¸¸æˆéŸ³é¢‘è®¾è®¡å¸ˆå£å»

**DSL Fission V1.0**
- [New] é¦–ç‰ˆå‘å¸ƒ,åŸºäºçœŸå®å‚æ•°çš„å®‰å…¨è£‚å˜

---

## æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | ç‰ˆæœ¬ | åŠŸèƒ½ |
|------|------|------|
| reverse_compiler.py | V3.2 | WWU â†’ DSL é€†å‘ç¼–è¯‘ |
| dsl_parser.py | V7.2 | DSL â†’ WAAPI æ‰§è¡Œè®¡åˆ’ |
| registry.py | V8.2 | å¯¹è±¡ GUID æ³¨å†Œä¸æŸ¥æ‰¾ |
| instruction_generator.py | V1.0 | è‡ªç„¶è¯­è¨€æŒ‡ä»¤ç”Ÿæˆ |
| dsl_fission.py | V1.0 | æ ·æœ¬è£‚å˜æ‰©å…… |

---

*æœ¬æ–‡æ¡£ç”± NeuroWwise Team ç»´æŠ¤*